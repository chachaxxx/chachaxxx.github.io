(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{540:function(t,s,a){t.exports=a.p+"assets/img/vuex1.b829f7dd.png"},777:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"vuex简介"}},[t._v("vuex简介")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/u010358168/article/details/107249106",target:"_blank",rel:"noopener noreferrer"}},[t._v("一遍文章搞懂Vuex不是梦---Vuex详解_小洋人最happy的博客-CSDN博客"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("1.本质：实现数据共享的一种方案。数据又称状态。")]),t._v(" "),n("p",[t._v("2.定义：vue实现组件间状态管理的一种机制，方便组件进行数据共享。")]),t._v(" "),n("p",[t._v("3.优点：")]),t._v(" "),n("ul",[n("li",[t._v("集中式管理数据，易于开发维护")]),t._v(" "),n("li",[t._v("高效实现组件数据共享，提高开发效率")]),t._v(" "),n("li",[t._v("存储在vuex的数据都是响应式的，保持页面和数据同步。")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(540),alt:"image-20220407155606452"}})]),t._v(" "),n("h1",{attrs:{id:"vuex使用步骤"}},[t._v("vuex使用步骤")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("1.引入vuex包")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vuex "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),t._v("\n\n    Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Vuex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("创建store对象")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vuex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Store")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         keyName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("defualtVal\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("将store对象挂载到vue实例中")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    router"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    store\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),n("h1",{attrs:{id:"vuex核心概念"}},[t._v("vuex核心概念")]),t._v(" "),n("h2",{attrs:{id:"state"}},[t._v("State")]),t._v(" "),n("p",[t._v("Vuex使用单一状态树，一个包含全部应用层级状态的对象，也就是"),n("code",[t._v("Store")]),t._v("实例，作为唯一数据源。")]),t._v(" "),n("p",[n("code",[t._v("State")]),t._v("是提供唯一的公共数据源，共享的数据放到"),n("code",[t._v("Store")]),t._v("的"),n("code",[t._v("State")]),t._v("中进行存储。")]),t._v(" "),n("p",[n("strong",[t._v("访问方式")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keyName\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入mapState")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mapState "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),t._v("\n\n  computed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 展开返回的对象")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"getter"}},[t._v("Getter")]),t._v(" "),n("p",[t._v("在store中对状态进行一些操作，比如派生状态、形成列表、过滤计数等。")]),t._v(" "),n("p",[t._v("store的state发生改变，getter也会发生改变。")]),t._v(" "),n("p",[n("strong",[t._v("使用方法")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    todos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  getters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取修饰后的值，第一个参数state为必要参数，必须写在形参上")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("doneTodos")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("todos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("todo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" todo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("done"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 带参数")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getTodoById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("todos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("todo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" todo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("doneTodos\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTodoById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用对象展开运算符将 getter 混入 computed 对象中")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mapGetters "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),t._v("\ncomputed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapGetters")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'doneTodosCount'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'anotherGetter'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"mutation"}},[t._v("Mutation")]),t._v(" "),n("p",[t._v("更改store中唯一的办法是提交mutation。")]),t._v(" "),n("p",[t._v("Mutation中不可以执行异步操作，如需异步，请在Action中处理。")]),t._v(" "),n("p",[n("strong",[t._v("原因")]),t._v("：任何在回调函数中进行的状态的改变都是不可追踪的。当 mutation 触发的时候，回调函数还没有被调用状态还没改变。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mutations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认参数state，这个就是存储在Store中的state对象。")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("payload")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 变更状态")]),t._v("\n      state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 ")]),t._v("\nstore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nstore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmethods"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapMutations")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//or")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapMutations")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      add"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将 `this.add()` 映射为 `this.$store.commit('increment')`")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前组件设置的click方法")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"action"}},[t._v("Action")]),t._v(" "),n("p",[t._v("Action 类似于 mutation，不同在于：")]),t._v(" "),n("ul",[n("li",[t._v("Action 提交的是 mutation，而不是直接变更状态。")]),t._v(" "),n("li",[t._v("Action 可以包含任意异步操作。")])]),t._v(" "),n("p",[t._v("在actions中定义的方法，都会有默认值context。"),n("code",[t._v("context")]),t._v("是和"),n("code",[t._v("store")]),t._v("对象具有相同方法和属性的对象。可以通过解构获取store对象的方法和状态。")]),t._v(" "),n("p",[n("strong",[t._v("使用方法")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("incrementAsync")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" commit "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nstore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'incrementAsync'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mapActions "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  methods"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapActions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将 `this.increment()` 映射为 `this.$store.dispatch('increment')`")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapActions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      add"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将 `this.add()` 映射为 `this.$store.dispatch('increment')`")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"module"}},[t._v("Module")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Vues")]),t._v("使用单一状态树，意味着很多状态都会交给"),n("code",[t._v("Vuex")]),t._v("来管理")]),t._v(" "),n("li",[t._v("当应用变的非常复杂时，"),n("code",[t._v("Store")]),t._v("对象就可能变的相当臃肿")]),t._v(" "),n("li",[t._v("为解决这个问题，"),n("code",[t._v("Vuex")]),t._v("允许我们将"),n("code",[t._v("store")]),t._v("分割成模块"),n("code",[t._v("(Module)")]),t._v("，并且每个模块拥有自己的"),n("code",[t._v("State、Mutation、Actions、Getters")]),t._v("等")])]),t._v(" "),n("p",[n("strong",[t._v("使用方法")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moduleA "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mutations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  getters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moduleB "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mutations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  modules"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" moduleA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" moduleB\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nstore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> moduleA 的状态")]),t._v("\nstore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> moduleB 的状态")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在方法中的暴露情况")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state && rootState ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// map时")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//getters['account/isAdmin']")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//          命名空间   对应操作")]),t._v("\n")])])]),n("h1",{attrs:{id:"操作速记"}},[t._v("操作速记")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提交同步mutationt，改变state")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提交action,触发提交mutation")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Promise"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("any"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一些取出方法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 放在computed里面")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取出state、getter")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Array"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapGetters")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapGetters")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Array"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 放在methods里面")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapMutations")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapMutations")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Array"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapActions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapActions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("namespace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Array"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object\n")])])]),n("h1",{attrs:{id:"vuex面试题"}},[t._v("vuex面试题")]),t._v(" "),n("h4",{attrs:{id:"什么是vuex？"}},[t._v("什么是Vuex？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("Vuex 是一个专为 Vue.js 应用程序开发的状态管理插件。它采用集中式存储管理应用的所有组件的状态，而更改状态的唯一方法是提交mutation，例"),n("code",[t._v("this.$store.commit('SET_VIDEO_PAUSE', video_pause")]),t._v("，"),n("code",[t._v("SET_VIDEO_PAUSE")]),t._v("为mutations属性中定义的方法\n。")])]),t._v(" "),n("h4",{attrs:{id:"vuex解决了什么问题？"}},[t._v("Vuex解决了什么问题？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("解决两个问题")]),t._v(" "),n("ul",[n("li",[t._v("多个组件依赖于同一状态时，对于多层嵌套的组件的传参将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。")]),t._v(" "),n("li",[t._v("来自不同组件的行为需要变更同一状态。以往采用父子组件直接引用或者通过事件来变更和同步状态的多份拷贝。以上的这些模式非常脆弱，通常会导致无法维护的代码。")])])]),t._v(" "),n("h4",{attrs:{id:"什么时候用vuex？"}},[t._v("什么时候用Vuex？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("当项目遇到以下两种场景时")]),t._v(" "),n("ul",[n("li",[t._v("多个组件依赖于同一状态时。")]),t._v(" "),n("li",[t._v("来自不同组件的行为需要变更同一状态。")])])]),t._v(" "),n("h4",{attrs:{id:"怎么引用vuex？"}},[t._v("怎么引用Vuex？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("ul",[n("li",[t._v("先安装依赖"),n("code",[t._v("nnpm install vuex --save")])]),t._v(" "),n("li",[t._v("在项目目录src中建立store文件夹")]),t._v(" "),n("li",[t._v("在store文件夹下新建index.js文件,写入"),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import Vue from "),n("span",[t._v("'vue'")]),t._v(";\nimport Vuex from "),n("span",[t._v("'vuex'")]),t._v(";\nVue.use(Vuex);\n//不是在生产环境debug为"),n("span",[t._v("true")]),t._v("\nconst debug = process.env.NODE_ENV !== "),n("span",[t._v("'production'")]),t._v(";\n//创建Vuex实例对象\nconst store = new Vuex.Store({\n    strict:debug,//在不是生产环境下都开启严格模式\n    state:{\n    },\n    getters:{\n    },\n    mutations:{\n    },\n    actions:{\n    }\n})\n"),n("span",[t._v("export")]),t._v(" default store;\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("li",[t._v("然后再main.js文件中引入Vuex,这么写"),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import Vue from "),n("span",[t._v("'vue'")]),t._v(";\nimport App from "),n("span",[t._v("'./App.vue'")]),t._v(";\nimport store from "),n("span",[t._v("'./store'")]),t._v(";\nconst vm = new Vue({\n    store:store,\n    render: h => h(App)\n})."),n("span",[t._v("$mount")]),t._v("("),n("span",[t._v("'#app'")]),t._v(")\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])])])]),t._v(" "),n("h4",{attrs:{id:"vuex的5个核心属性是什么？"}},[t._v("Vuex的5个核心属性是什么？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v("\n分别是 state、getters、mutations、actions、modules 。\n")]),t._v(" "),n("h4",{attrs:{id:"vuex中状态储存在哪里，怎么改变它？"}},[t._v("Vuex中状态储存在哪里，怎么改变它？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v("\n存储在state中，改变Vuex中的状态的唯一途径就是显式地提交 (commit) mutation。\n")]),t._v(" "),n("h4",{attrs:{id:"vuex中状态是对象时，使用时要注意什么？"}},[t._v("Vuex中状态是对象时，使用时要注意什么？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v("\n因为对象是引用类型，复制后改变属性还是会影响原始数据，这样会改变state里面的状态，是不允许，所以先用深度克隆复制对象，再修改。\n")]),t._v(" "),n("h4",{attrs:{id:"怎么在组件中批量使用vuex的state状态？"}},[t._v("怎么在组件中批量使用Vuex的state状态？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("使用mapState辅助函数, 利用对象展开运算符将state混入computed对象中")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import {mapState} from "),n("span",[t._v("'vuex'")]),t._v("\n"),n("span",[t._v("export")]),t._v(" default{\n    computed:{\n        ...mapState(["),n("span",[t._v("'price'")]),t._v(","),n("span",[t._v("'number'")]),t._v("])\n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"vuex中要从state派生一些状态出来，且多个组件使用它，该怎么做，？"}},[t._v("Vuex中要从state派生一些状态出来，且多个组件使用它，该怎么做，？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v("\n使用getter属性，相当Vue中的计算属性computed，只有原状态改变派生状态才会改变。\n"),n("p",[t._v("getter接收两个参数，第一个是state，第二个是getters(可以用来访问其他getter)。")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("const store = new Vuex.Store({\n    state: {\n        price: 10,\n        number: 10,\n        discount: 0.7,\n    },\n    getters: {\n        total: state => {\n            "),n("span",[t._v("return")]),t._v(" state.price * state.number\n        },\n        discountTotal: (state, getters) => {\n            "),n("span",[t._v("return")]),t._v(" state.discount * getters.total\n        }\n    },\n});\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])]),n("p",[t._v("然后在组件中可以用计算属性computed通过"),n("code",[t._v("this.$store.getters.total")]),t._v("这样来访问这些派生转态。")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("computed: {\n    "),n("span",[n("span",[t._v("total")])]),t._v("() {\n        "),n("span",[t._v("return")]),t._v(" this."),n("span",[t._v("$store")]),t._v(".getters.total\n    },\n    "),n("span",[n("span",[t._v("discountTotal")])]),t._v("() {\n        "),n("span",[t._v("return")]),t._v(" this."),n("span",[t._v("$store")]),t._v(".getters.discountTotal\n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"怎么通过getter来实现在组件内可以通过特定条件来获取state的状态？"}},[t._v("怎么通过getter来实现在组件内可以通过特定条件来获取state的状态？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("通过让getter返回一个函数，来实现给getter传参。然后通过参数来进行判断从而获取state中满足要求的状态。")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("const store = new Vuex.Store({\n    state: {\n        todos: [\n            { id: 1, text: "),n("span",[t._v("'...'")]),t._v(", "),n("span",[t._v("done")]),t._v(": "),n("span",[t._v("true")]),t._v(" },\n            { id: 2, text: "),n("span",[t._v("'...'")]),t._v(", "),n("span",[t._v("done")]),t._v(": "),n("span",[t._v("false")]),t._v(" }\n        ]\n    },\n    getters: {\n        getTodoById: (state) => (id) =>{\n            "),n("span",[t._v("return")]),t._v(" state.todos.find(todo => todo.id === id)\n        }\n    },\n});\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])]),n("p",[t._v("然后在组件中可以用计算属性computed通过"),n("code",[t._v("this.$store.getters.getTodoById(2)")]),t._v("这样来访问这些派生转态。")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("computed: {\n    "),n("span",[n("span",[t._v("getTodoById")])]),t._v("() {\n        "),n("span",[t._v("return")]),t._v(" this."),n("span",[t._v("$store")]),t._v(".getters.getTodoById\n    },\n}\n"),n("span",[n("span",[t._v("mounted")])]),t._v("(){\n    console.log(this.getTodoById(2).done)//"),n("span",[t._v("false")]),t._v("\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"怎么在组件中批量使用vuex的getter属性"}},[t._v("怎么在组件中批量使用Vuex的getter属性")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("使用mapGetters辅助函数, 利用对象展开运算符将getter混入computed 对象中")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import {mapGetters} from "),n("span",[t._v("'vuex'")]),t._v("\n"),n("span",[t._v("export")]),t._v(" default{\n    computed:{\n        ...mapGetters(["),n("span",[t._v("'total'")]),t._v(","),n("span",[t._v("'discountTotal'")]),t._v("])\n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"怎么在组件中批量给vuex的getter属性取别名并使用"}},[t._v("怎么在组件中批量给Vuex的getter属性取别名并使用")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("使用mapGetters辅助函数, 利用对象展开运算符将getter混入computed 对象中")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import {mapGetters} from "),n("span",[t._v("'vuex'")]),t._v("\n"),n("span",[t._v("export")]),t._v(" default{\n    computed:{\n        ...mapGetters({\n            myTotal:"),n("span",[t._v("'total'")]),t._v(",\n            myDiscountTotal:"),n("span",[t._v("'discountTotal'")]),t._v(",\n        })\n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"在vuex的state中有个状态number表示货物数量，在组件怎么改变它。"}},[t._v("在Vuex的state中有个状态number表示货物数量，在组件怎么改变它。")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("首先要在mutations中注册一个mutation")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("const store = new Vuex.Store({\n    state: {\n        number: 10,\n    },\n    mutations: {\n        SET_NUMBER(state,data){\n            state.number=data;\n        }\n    },\n});\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])]),n("p",[t._v("在组件中使用"),n("code",[t._v("this.$store.commit")]),t._v("提交mutation，改变number")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("this."),n("span",[t._v("$store")]),t._v(".commit("),n("span",[t._v("'SET_NUMBER'")]),t._v(",10)\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"在vuex中使用mutation要注意什么。"}},[t._v("在Vuex中使用mutation要注意什么。")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v("\nmutation 必须是同步函数\n")]),t._v(" "),n("h4",{attrs:{id:"在组件中多次提交同一个mutation，怎么写使用更方便。"}},[t._v("在组件中多次提交同一个mutation，怎么写使用更方便。")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("使用mapMutations辅助函数,在组件中这么使用")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import { mapMutations } from "),n("span",[t._v("'vuex'")]),t._v("\nmethods:{\n    ...mapMutations({\n        "),n("span",[t._v("set")]),t._v("Number:"),n("span",[t._v("'SET_NUMBER'")]),t._v(",\n    })\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])]),n("p",[t._v("然后调用"),n("code",[t._v("this.setNumber(10)")]),t._v("相当调用"),n("code",[t._v("this.$store.commit('SET_NUMBER',10)")])])]),t._v(" "),n("h4",{attrs:{id:"vuex中action和mutation有什么区别？"}},[t._v("Vuex中action和mutation有什么区别？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("ul",[n("li",[t._v("action 提交的是 mutation，而不是直接变更状态。mutation可以直接变更状态。")]),t._v(" "),n("li",[t._v("action 可以包含任意异步操作。mutation只能是同步操作。")]),t._v(" "),n("li",[t._v("提交方式不同，action 是用"),n("code",[t._v("this.$store.dispatch('ACTION_NAME',data)")]),t._v("来提交。mutation是用"),n("code",[t._v("this.$store.commit('SET_NUMBER',10)")]),t._v("来提交。")]),t._v(" "),n("li",[t._v("接收参数不同，mutation第一个参数是state，而action第一个参数是context，其包含了"),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("{\n    state,      // 等同于 `store.state`，若在模块中则为局部状态\n    rootState,  // 等同于 `store.state`，只存在于模块中\n    commit,     // 等同于 `store.commit`\n    dispatch,   // 等同于 `store.dispatch`\n    getters,    // 等同于 `store.getters`\n    rootGetters // 等同于 `store.getters`，只存在于模块中\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])])])]),t._v(" "),n("h4",{attrs:{id:"vuex中action和mutation有什么相同点？"}},[t._v("Vuex中action和mutation有什么相同点？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("第二参数都可以接收外部提交时传来的参数。\n"),n("code",[t._v("this.$store.dispatch('ACTION_NAME',data)")]),t._v("和"),n("code",[t._v("this.$store.commit('SET_NUMBER',10)")])])]),t._v(" "),n("h4",{attrs:{id:"在组件中多次提交同一个action，怎么写使用更方便。"}},[t._v("在组件中多次提交同一个action，怎么写使用更方便。")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("使用mapActions辅助函数,在组件中这么使用")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("methods:{\n    ...mapActions({\n        "),n("span",[t._v("set")]),t._v("Number:"),n("span",[t._v("'SET_NUMBER'")]),t._v(",\n    })\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])]),n("p",[t._v("然后调用"),n("code",[t._v("this.setNumber(10)")]),t._v("相当调用"),n("code",[t._v("this.$store.dispatch('SET_NUMBER',10)")])])]),t._v(" "),n("h4",{attrs:{id:"vuex中action通常是异步的，那么如何知道action什么时候结束呢？"}},[t._v("Vuex中action通常是异步的，那么如何知道action什么时候结束呢？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("在action函数中返回Promise，然后再提交时候用then处理")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("actions:{\n    SET_NUMBER_A({commit},data){\n        "),n("span",[t._v("return")]),t._v(" new Promise((resolve,reject) =>{\n            "),n("span",[t._v("set")]),t._v("Timeout(() =>{\n                commit("),n("span",[t._v("'SET_NUMBER'")]),t._v(",10);\n                resolve();\n            },2000)\n        })\n    }\n}\nthis."),n("span",[t._v("$store")]),t._v(".dispatch("),n("span",[t._v("'SET_NUMBER_A'")]),t._v(").then(() => {\n  // ...\n})\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"vuex中有两个action，分别是actiona和actionb，其内都是异步操作，在actionb要提交actiona，需在actiona处理结束再处理其它操作，怎么实现？"}},[t._v("Vuex中有两个action，分别是actionA和actionB，其内都是异步操作，在actionB要提交actionA，需在actionA处理结束再处理其它操作，怎么实现？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("利用ES6的"),n("code",[t._v("async")]),t._v("和"),n("code",[t._v("await")]),t._v("来实现。")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("actions:{\n    async actionA({commit}){\n        //...\n    },\n    async actionB({dispatch}){\n        await dispatch ("),n("span",[t._v("'actionA'")]),t._v(")//等待actionA完成\n        // ... \n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"有用过vuex模块吗，为什么要使用，怎么使用。"}},[t._v("有用过Vuex模块吗，为什么要使用，怎么使用。")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("有，因为使用单一状态树，应用的所有状态会集中到一个比较大的对象。当应用变得非常复杂时，store 对象就有可能变得相当臃肿。所以将 store 分割成模块（module）。每个模块拥有自己的 state、mutations、actions、getters，甚至是嵌套子模块，从上至下进行同样方式的分割。")]),t._v(" "),n("p",[t._v("在module文件新建moduleA.js和moduleB.js文件。在文件中写入")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("const state={\n    //...\n}\nconst getters={\n    //...\n}\nconst mutations={\n    //...\n}\nconst actions={\n    //...\n}\n"),n("span",[t._v("export")]),t._v(" default{\n    state,\n    getters,\n    mutations,\n    actions\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])]),n("p",[t._v("然后再index.js引入模块")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import Vue from "),n("span",[t._v("'vue'")]),t._v(";\nimport Vuex from "),n("span",[t._v("'vuex'")]),t._v(";\nVue.use(Vuex);\nimport moduleA from "),n("span",[t._v("'./module/moduleA'")]),t._v("\nimport moduleB from "),n("span",[t._v("'./module/moduleB'")]),t._v("\nconst store = new Vuex.Store({\n    modules:{\n        moduleA,\n        moduleB\n    }\n})\n"),n("span",[t._v("export")]),t._v(" default store\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"在模块中，getter和mutation接收的第一个参数state，是全局的还是模块的？"}},[t._v("在模块中，getter和mutation接收的第一个参数state，是全局的还是模块的？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v("\n第一个参数state是模块的state，也就是局部的state。\n")]),t._v(" "),n("h4",{attrs:{id:"在模块中，getter和mutation和action中怎么访问全局的state和getter？"}},[t._v("在模块中，getter和mutation和action中怎么访问全局的state和getter？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("ul",[n("li",[t._v("在getter中可以通过第三个参数rootState访问到全局的state,可以通过第四个参数rootGetters访问到全局的getter。")]),t._v(" "),n("li",[t._v("在mutation中不可以访问全局的satat和getter，只能访问到局部的state。")]),t._v(" "),n("li",[t._v("在action中第一个参数context中的"),n("code",[t._v("context.rootState")]),t._v("访问到全局的state，"),n("code",[t._v("context.rootGetters")]),t._v("访问到全局的getter。")])])]),t._v(" "),n("h4",{attrs:{id:"在组件中怎么访问vuex模块中的getter和state-怎么提交mutation和action？"}},[t._v("在组件中怎么访问Vuex模块中的getter和state,怎么提交mutation和action？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("ul",[n("li",[t._v("直接通过"),n("code",[t._v("this.$store.getters")]),t._v("和"),n("code",[t._v("this.$store.state")]),t._v("来访问模块中的getter和state。")]),t._v(" "),n("li",[t._v("直接通过"),n("code",[t._v("this.$store.commit('mutationA',data)")]),t._v("提交模块中的mutation。")]),t._v(" "),n("li",[t._v("直接通过"),n("code",[t._v("this.$store.dispatch('actionA,data')")]),t._v("提交模块中的action。")])])]),t._v(" "),n("h4",{attrs:{id:"用过vuex模块的命名空间吗？为什么使用，怎么使用。"}},[t._v("用过Vuex模块的命名空间吗？为什么使用，怎么使用。")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("默认情况下，模块内部的action、mutation和getter是注册在全局命名空间，如果多个模块中action、mutation的命名是一样的，那么提交mutation、action时，将会触发所有模块中命名相同的mutation、action。")]),t._v(" "),n("p",[t._v("这样有太多的耦合，如果要使你的模块具有更高的封装度和复用性，你可以通过添加"),n("code",[t._v("namespaced: true")]),t._v(" 的方式使其成为带命名空间的模块。")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[n("span",[t._v("export")]),t._v(" default{\n    namespaced: "),n("span",[t._v("true")]),t._v(",\n    state,\n    getters,\n    mutations,\n    actions\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"怎么在带命名空间的模块内提交全局的mutation和action？"}},[t._v("怎么在带命名空间的模块内提交全局的mutation和action？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("将 { root: true } 作为第三参数传给 dispatch 或 commit 即可。")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("this."),n("span",[t._v("$store")]),t._v(".dispatch("),n("span",[t._v("'actionA'")]),t._v(", null, { root: "),n("span",[t._v("true")]),t._v(" })\nthis."),n("span",[t._v("$store")]),t._v(".commit("),n("span",[t._v("'mutationA'")]),t._v(", null, { root: "),n("span",[t._v("true")]),t._v(" })\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"怎么在带命名空间的模块内注册全局的action？"}},[t._v("怎么在带命名空间的模块内注册全局的action？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("actions: {\n    actionA: {\n        root: "),n("span",[t._v("true")]),t._v(",\n        handler (context, data) { ... }\n    }\n  }\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"组件中怎么提交modules中的带命名空间的modulea中的mutationa？"}},[t._v("组件中怎么提交modules中的带命名空间的moduleA中的mutationA？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("this."),n("span",[t._v("$store")]),t._v(".commit("),n("span",[t._v("'moduleA/mutationA'")]),t._v(",data)\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"怎么使用mapstate，mapgetters，mapactions和mapmutations这些函数来绑定带命名空间的模块？"}},[t._v("怎么使用mapState，mapGetters，mapActions和mapMutations这些函数来绑定带命名空间的模块？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("首先使用"),n("code",[t._v("createNamespacedHelpers")]),t._v("创建基于某个命名空间辅助函数")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import { createNamespacedHelpers } from "),n("span",[t._v("'vuex'")]),t._v(";\nconst { mapState, mapActions } = createNamespacedHelpers("),n("span",[t._v("'moduleA'")]),t._v(");\n"),n("span",[t._v("export")]),t._v(" default {\n    computed: {\n        // 在 `module/moduleA` 中查找\n        ...mapState({\n            a: state => state.a,\n            b: state => state.b\n        })\n    },\n    methods: {\n        // 在 `module/moduleA` 中查找\n        ...mapActions([\n            "),n("span",[t._v("'actionA'")]),t._v(",\n            "),n("span",[t._v("'actionB'")]),t._v("\n        ])\n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"vuex插件有用过吗？怎么用简单介绍一下？"}},[t._v("Vuex插件有用过吗？怎么用简单介绍一下？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("Vuex插件就是一个函数，它接收 store 作为唯一参数。在Vuex.Store构造器选项plugins引入。\n在store/plugin.js文件中写入")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[n("span",[t._v("export")]),t._v(" default "),n("span",[t._v("function")]),t._v(" createPlugin(param){\n    "),n("span",[t._v("return")]),t._v(" store =>{\n        //...\n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])]),n("p",[t._v("然后在store/index.js文件中写入")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import createPlugin from "),n("span",[t._v("'./plugin.js'")]),t._v("\nconst myPlugin = createPlugin()\nconst store = new Vuex.Store({\n  // ...\n  plugins: [myPlugin]\n})\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"在vuex插件中怎么监听组件中提交mutation和action？"}},[t._v("在Vuex插件中怎么监听组件中提交mutation和action？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("ul",[n("li",[t._v("用Vuex.Store的实例方法"),n("code",[t._v("subscribe")]),t._v("监听组件中提交mutation")]),t._v(" "),n("li",[t._v("用Vuex.Store的实例方法"),n("code",[t._v("subscribeAction")]),t._v("监听组件中提交action\n在store/plugin.js文件中写入")])]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[n("span",[t._v("export")]),t._v(" default "),n("span",[t._v("function")]),t._v(" createPlugin(param) {\n    "),n("span",[t._v("return")]),t._v(" store => {\n        store.subscribe((mutation, state) => {\n            console.log(mutation.type)//是那个mutation\n            console.log(mutation.payload)\n            console.log(state)\n        })\n        // store.subscribeAction((action, state) => {\n        //     console.log(action.type)//是那个action\n        //     console.log(action.payload)//提交action的参数\n        // })\n        store.subscribeAction({\n            before: (action, state) => {//提交action之前\n                console.log(`before action "),n("span",[t._v("${action.type}")]),t._v("`)\n            },\n            after: (action, state) => {//提交action之后\n                console.log(`after action "),n("span",[t._v("${action.type}")]),t._v("`)\n            }\n        })\n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])]),n("p",[t._v("然后在store/index.js文件中写入")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("import createPlugin from "),n("span",[t._v("'./plugin.js'")]),t._v("\nconst myPlugin = createPlugin()\nconst store = new Vuex.Store({\n  // ...\n  plugins: [myPlugin]\n})\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"在v-model上怎么用vuex中state的值？"}},[t._v("在v-model上怎么用Vuex中state的值？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v(" "),n("p",[t._v("需要通过computed计算属性来转换。")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("<input v-model="),n("span",[t._v('"message"')]),t._v(">\n// ...\ncomputed: {\n    message: {\n        "),n("span",[n("span",[t._v("get")])]),t._v(" () {\n            "),n("span",[t._v("return")]),t._v(" this."),n("span",[t._v("$store")]),t._v(".state.message\n        },\n        "),n("span",[t._v("set")]),t._v(" (value) {\n            this."),n("span",[t._v("$store")]),t._v(".commit("),n("span",[t._v("'updateMessage'")]),t._v(", value)\n        }\n    }\n}\n"),n("span",{staticClass:"copy-code-btn"},[t._v("复制代码")])])])]),t._v(" "),n("h4",{attrs:{id:"vuex的严格模式是什么-有什么作用-怎么开启？"}},[t._v("Vuex的严格模式是什么,有什么作用,怎么开启？")]),t._v(" "),n("details",{attrs:{open:""}},[n("summary",[t._v("参考答案")]),t._v("在严格模式下，无论何时发生了状态变更且不是由 mutation函数引起的，将会抛出错误。这能保证所有的状态变更都能被调试工具跟踪到。"),n("p"),t._v(" "),n("p",[t._v("在Vuex.Store 构造器选项中开启,如下")]),t._v(" "),n("pre",[n("code",{staticClass:"copyable",attrs:{lang:"bash"}},[t._v("const store = new Vuex.Store({\n    strict:"),n("span",[t._v("true")]),t._v(",\n})")])])]),t._v("\n#### 刷新界面Vuex数据会丢失么\n"),n("p",[t._v("重新初始化vue实例，重新初始化store中的state。会丢失状态。")]),t._v(" "),n("p",[t._v("可以通过本地存储等手段进行持久化存储。")])])}),[],!1,null,null,null);s.default=e.exports}}]);