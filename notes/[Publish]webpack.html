<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简介 | My Cata</title>
    <meta name="description" content="The description of the site.">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.2264d4e8.css" as="style"><link rel="preload" href="/assets/js/app.61f0c8a1.js" as="script"><link rel="preload" href="/assets/js/4.031c4c0e.js" as="script"><link rel="preload" href="/assets/js/47.7663057f.js" as="script"><link rel="prefetch" href="/assets/js/1.2c06699e.js"><link rel="prefetch" href="/assets/js/10.69d76af3.js"><link rel="prefetch" href="/assets/js/11.059a4e31.js"><link rel="prefetch" href="/assets/js/12.c81d7cb5.js"><link rel="prefetch" href="/assets/js/13.444e4ec8.js"><link rel="prefetch" href="/assets/js/14.124d2bed.js"><link rel="prefetch" href="/assets/js/15.febf1378.js"><link rel="prefetch" href="/assets/js/16.446eca84.js"><link rel="prefetch" href="/assets/js/17.4367e345.js"><link rel="prefetch" href="/assets/js/18.9c5bf55a.js"><link rel="prefetch" href="/assets/js/19.73842072.js"><link rel="prefetch" href="/assets/js/20.ff54a6bc.js"><link rel="prefetch" href="/assets/js/21.cd6b4fbb.js"><link rel="prefetch" href="/assets/js/22.e976ee8a.js"><link rel="prefetch" href="/assets/js/23.0a9fb249.js"><link rel="prefetch" href="/assets/js/24.1b21c491.js"><link rel="prefetch" href="/assets/js/25.5b1348de.js"><link rel="prefetch" href="/assets/js/26.298c82d1.js"><link rel="prefetch" href="/assets/js/27.f0f6a4a0.js"><link rel="prefetch" href="/assets/js/28.846b0858.js"><link rel="prefetch" href="/assets/js/29.39bfed1a.js"><link rel="prefetch" href="/assets/js/3.9e8bbfcf.js"><link rel="prefetch" href="/assets/js/30.017396f1.js"><link rel="prefetch" href="/assets/js/31.36f79d24.js"><link rel="prefetch" href="/assets/js/32.3173e347.js"><link rel="prefetch" href="/assets/js/33.fcbffb8a.js"><link rel="prefetch" href="/assets/js/34.b471191f.js"><link rel="prefetch" href="/assets/js/35.a9871011.js"><link rel="prefetch" href="/assets/js/36.f3cad3f2.js"><link rel="prefetch" href="/assets/js/37.340f7814.js"><link rel="prefetch" href="/assets/js/38.16e9a483.js"><link rel="prefetch" href="/assets/js/39.8bb71add.js"><link rel="prefetch" href="/assets/js/40.f60ca09c.js"><link rel="prefetch" href="/assets/js/41.6c5d4837.js"><link rel="prefetch" href="/assets/js/42.7cb165b2.js"><link rel="prefetch" href="/assets/js/43.016f7d1f.js"><link rel="prefetch" href="/assets/js/44.50cc140b.js"><link rel="prefetch" href="/assets/js/45.cec45a65.js"><link rel="prefetch" href="/assets/js/46.44c8ce2f.js"><link rel="prefetch" href="/assets/js/48.b63e4edc.js"><link rel="prefetch" href="/assets/js/49.1c04ecb0.js"><link rel="prefetch" href="/assets/js/5.e5b013c3.js"><link rel="prefetch" href="/assets/js/50.203149d1.js"><link rel="prefetch" href="/assets/js/51.e8d2808e.js"><link rel="prefetch" href="/assets/js/52.4bff45a3.js"><link rel="prefetch" href="/assets/js/53.d3bfe4fc.js"><link rel="prefetch" href="/assets/js/54.ece4d1bd.js"><link rel="prefetch" href="/assets/js/55.7bfc0aea.js"><link rel="prefetch" href="/assets/js/56.abfbcb0a.js"><link rel="prefetch" href="/assets/js/57.322cc0c7.js"><link rel="prefetch" href="/assets/js/58.8069b906.js"><link rel="prefetch" href="/assets/js/59.4af20640.js"><link rel="prefetch" href="/assets/js/6.ee007060.js"><link rel="prefetch" href="/assets/js/60.2bc64cd9.js"><link rel="prefetch" href="/assets/js/61.a8a49e1b.js"><link rel="prefetch" href="/assets/js/62.ba6d639c.js"><link rel="prefetch" href="/assets/js/63.85b52299.js"><link rel="prefetch" href="/assets/js/64.ae97ef4b.js"><link rel="prefetch" href="/assets/js/65.a9ec3ec1.js"><link rel="prefetch" href="/assets/js/7.445bd0ee.js"><link rel="prefetch" href="/assets/js/8.8f7c8e84.js"><link rel="prefetch" href="/assets/js/9.7e7cc3fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2264d4e8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">My Cata</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">作品集</a></div><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">笔记</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">作品集</a></div><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">笔记</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/" class="sidebar-link">/notes/</a></li><li><a href="/notes/[Base]MVVM &amp;  MVC.html" class="sidebar-link">[Base]MVVM &amp;  MVC</a></li><li><a href="/notes/[Base]八股文.html" class="sidebar-link">[Base]八股文</a></li><li><a href="/notes/[Base]前端安全问题.html" class="sidebar-link">[Base]前端安全问题</a></li><li><a href="/notes/[Base]语言中所有的底层存储方式.html" class="sidebar-link">[Base]语言中所有的底层存储方式</a></li><li><a href="/notes/[Base]跨域以及解决方案.html" class="sidebar-link">[Base]跨域以及解决方案</a></li><li><a href="/notes/[Base]身份认证.html" class="sidebar-link">[Base]身份认证</a></li><li><a href="/notes/[Electtron]学习笔记.html" class="sidebar-link">[Electtron]学习笔记</a></li><li><a href="/notes/[HTML]HTML5.html" class="sidebar-link">[HTML]HTML5</a></li><li><a href="/notes/[HTML]语义化.html" class="sidebar-link">[HTML]语义化</a></li><li><a href="/notes/[JavaScript]ES6新特性.html" class="sidebar-link">[JavaScript]ES6新特性</a></li><li><a href="/notes/[JavaScript]EventLoop、宏任务和微任务.html" class="sidebar-link">[JavaScript]EventLoop、宏任务和微任务</a></li><li><a href="/notes/[JavaScript]Symbol.html" class="sidebar-link">[JavaScript]Symbol</a></li><li><a href="/notes/[JavaScript]this &amp; bind,apply,call 装饰器.html" class="sidebar-link">[JavaScript]this &amp; bind,apply,call 装饰器</a></li><li><a href="/notes/[JavaScript]事件流、事件委托、事件冒泡.html" class="sidebar-link">[JavaScript]事件流、事件委托、事件冒泡</a></li><li><a href="/notes/[JavaScript]作用域、闭包、变量、变量提升.html" class="sidebar-link">[JavaScript]作用域、闭包、变量、变量提升</a></li><li><a href="/notes/[JavaScript]原型、原型链、继承.html" class="sidebar-link">[JavaScript]原型、原型链、继承</a></li><li><a href="/notes/[JavaScript]常见数据处理积累.html" class="sidebar-link">[JavaScript]常见数据处理积累</a></li><li><a href="/notes/[JavaScript]异步.html" class="sidebar-link">[JavaScript]异步</a></li><li><a href="/notes/[JavaScript]正则表达式.html" class="sidebar-link">[JavaScript]正则表达式</a></li><li><a href="/notes/[JavaScript]深浅拷贝.html" class="sidebar-link">[JavaScript]深浅拷贝</a></li><li><a href="/notes/[Layout]响应式布局.html" class="sidebar-link">[Layout]响应式布局</a></li><li><a href="/notes/[Layout]界面兼容性.html" class="sidebar-link">[Layout]界面兼容性</a></li><li><a href="/notes/[Optimize]各种优化.html" class="sidebar-link">[Optimize]各种优化</a></li><li><a href="/notes/[Publish]webpack.html" class="active sidebar-link">[Publish]webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#入口（entry）" class="sidebar-link">入口（entry）</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#输出-output" class="sidebar-link">输出(output)</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#模式（mode）" class="sidebar-link">模式（mode）</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#模块（module）" class="sidebar-link">模块（module）</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#chunk" class="sidebar-link">chunk</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#loader" class="sidebar-link">loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#loader使用" class="sidebar-link">loader使用</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#常见loader" class="sidebar-link">常见loader</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#插件（plugin）" class="sidebar-link">插件（plugin）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#用法" class="sidebar-link">用法</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#常用plugin" class="sidebar-link">常用plugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#loader与plugin区别" class="sidebar-link">loader与plugin区别</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#提升效率" class="sidebar-link">提升效率</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#优化打包" class="sidebar-link">优化打包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#目标" class="sidebar-link">目标</a></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#手段" class="sidebar-link">手段</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/[Publish]webpack.html#热更新" class="sidebar-link">热更新</a></li></ul></li><li><a href="/notes/[Style]BFC.html" class="sidebar-link">[Style]BFC</a></li><li><a href="/notes/[Style]CSS3新特性.html" class="sidebar-link">[Style]CSS3新特性</a></li><li><a href="/notes/[Style]CSS预编译器对比.html" class="sidebar-link">[Style]CSS预编译器对比</a></li><li><a href="/notes/[Style]less.html" class="sidebar-link">[Style]less</a></li><li><a href="/notes/[Style]sass &amp; scss.html" class="sidebar-link">[Style]sass &amp; scss</a></li><li><a href="/notes/[Style]居中样式.html" class="sidebar-link">[Style]居中样式</a></li><li><a href="/notes/[Style]常见图形.html" class="sidebar-link">[Style]常见图形</a></li><li><a href="/notes/[Style]盒子模型与flex布局、栅格布局.html" class="sidebar-link">[Style]盒子模型与flex布局、栅格布局</a></li><li><a href="/notes/[TypeScript]学习笔记.html" class="sidebar-link">[TypeScript]学习笔记</a></li><li><a href="/notes/[UniAPP]与H5开发不同.html" class="sidebar-link">[UniAPP]与H5开发不同</a></li><li><a href="/notes/[Vue]Vue-router.html" class="sidebar-link">[Vue]Vue-router</a></li><li><a href="/notes/[Vue]Vuex.html" class="sidebar-link">[Vue]Vuex</a></li><li><a href="/notes/[Vue]小知识点.html" class="sidebar-link">[Vue]小知识点</a></li><li><a href="/notes/[Vue]指令.html" class="sidebar-link">[Vue]指令</a></li><li><a href="/notes/[Vue]生命周期.html" class="sidebar-link">[Vue]生命周期</a></li><li><a href="/notes/[Vue]组件通信方式.html" class="sidebar-link">[Vue]组件通信方式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="简介">简介</h1> <blockquote><p><strong>webpack</strong> 是一个现代 JavaScript 应用程序的<em>静态模块打包工具</em>。当 webpack 处理应用程序时，它会在内部构建一个 <a href="https://v4.webpack.docschina.org/concepts/dependency-graph/" target="_blank" rel="noopener noreferrer">依赖图(dependency graph)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，此依赖图会映射项目所需的每个模块，并生成一个或多个 <em>bundle</em>。</p></blockquote> <p>依赖图:</p> <p>​	当 webpack 处理应用程序时，它会根据命令行参数中或配置文件中定义的模块列表开始处理。 从 <a href="https://webpack.docschina.org/concepts/entry-points/" target="_blank" rel="noopener noreferrer"><em>入口</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 开始，webpack 会递归的构建一个 <em>依赖关系图</em>，这个依赖图包含着应用程序中所需的每个模块，然后将所有模块打包为少量的<strong>bundle</strong>—— 通常只有一个 —— 可由浏览器加载。</p> <h1 id="核心概念">核心概念</h1> <h2 id="入口（entry）">入口（entry）</h2> <ul><li><strong>入口起点(entry point)</strong> 指示 webpack 应该使用哪个模块，来作为构建其内部 <a href="https://webpack.docschina.org/concepts/dependency-graph/" target="_blank" rel="noopener noreferrer">依赖图(dependency graph)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的开始。进入入口起点后，webpack 会找出有哪些模块和库是入口起点（直接和间接）依赖的。</li> <li>默认值是 <code>./src/index.js</code></li> <li>一个或多个</li> <li>通过在 <a href="https://webpack.docschina.org/configuration" target="_blank" rel="noopener noreferrer">webpack configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中配置 <code>entry</code> 属性，来指定</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//entry: '...',</span>
    entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
        search<span class="token punctuation">:</span> <span class="token string">'./src/search.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// vue cli (vue.config.js)</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
    configureWebpack<span class="token punctuation">:</span><span class="token punctuation">{</span>
        entry<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="输出-output">输出(output)</h2> <ul><li><strong>output</strong> 属性告诉 webpack 在哪里输出它所创建的 <em>bundle</em>，以及如何命名这些文件。</li> <li>主要输出文件的默认值是 <code>./dist/main.js</code>，其他生成文件默认放置在 <code>./dist</code> 文件夹中。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'my-first-webpack.bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="模式（mode）">模式（mode）</h2> <p>选择 <code>development</code>, <code>production</code> 或 <code>none</code> 之中的一个，来设置 <code>mode</code> 参数，你可以启用 webpack 内置在相应环境下的优化。其默认值为 <code>production</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="模块（module）">模块（module）</h2> <ul><li><p>开发者将程序分解为功能离散的 chunk，并称之为 <strong>模块</strong></p></li> <li><p>webpack <em>模块</em> 能以各种方式表达它们的依赖关系。</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="noopener noreferrer">ES2015 <code>import</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 语句</li> <li><a href="http://www.commonjs.org/specs/modules/1.0/" target="_blank" rel="noopener noreferrer">CommonJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>require()</code> 语句</li> <li><a href="https://github.com/amdjs/amdjs-api/blob/master/AMD.md" target="_blank" rel="noopener noreferrer">AMD<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>define</code> 和 <code>require</code> 语句</li> <li>css/sass/less 文件中的 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@import" target="_blank" rel="noopener noreferrer"><code>@import</code> 语句<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</li> <li>stylesheet <code>url(...)</code> 或者 HTML <code>&lt;img src=...&gt;</code> 文件中的图片链接。</li></ul></li> <li><p>通过 <strong>loader</strong> 可以使 webpack 支持多种语言和预处理器语法编写的模块。<strong>loader</strong> 向 webpack 描述了如何处理非原生<em>模块</em>，并将相关<strong>依赖</strong>引入到你的 <strong>bundles</strong>中。</p></li> <li><p>Webpack 实际上为每个模块创造了一个可以导出和导入的环境，本质上并没有修改 代码的执行逻辑，代码执行顺序与模块加载顺序也完全一致。</p></li></ul> <h2 id="chunk">chunk</h2> <p>代码块,一个 Chunk 由多个模块组合而成,用于代码合并与分割。</p> <h2 id="loader">loader</h2> <ul><li><p>loader 用于对模块的源代码进行转换，<strong>将 Webpack 不认识的内容转化为认识的内容</strong></p></li> <li><p>loader 可以使你在 <code>import</code> 或&quot;加载&quot;模块时预处理文件。</p></li> <li><p>loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript 或将内联图像转换为 data URL。</p></li> <li><p>更加灵活地引入细粒度逻辑，例如：压缩、打包、语言转译（或编译）</p></li> <li><p>loader 支持链式调用。链中的每个 loader 会将转换应用在已处理过的资源上。一组链式的 loader 将按照相反的顺序执行。链中的第一个 loader 将其结果（也就是应用过转换后的资源）传递给下一个 loader，依此类推。最后，链中的最后一个 loader，返回 webpack 所期望的 JavaScript。</p></li> <li><p>loader 可以是同步的，也可以是异步的。</p></li> <li><p>loader 运行在 Node.js 中，并且能够执行任何操作。</p></li></ul> <h3 id="loader使用">loader使用</h3> <ul><li><p><a href="https://webpack.docschina.org/concepts/loaders/#configuration" target="_blank" rel="noopener noreferrer">配置方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（推荐）：在 <strong>webpack.config.js</strong> 文件中指定 loader。</p> <p><a href="https://webpack.docschina.org/configuration/module/#modulerules" target="_blank" rel="noopener noreferrer"><code>module.rules</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 允许你在 webpack 配置中指定多个 loader。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//在module配置</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// [style-loader](/loaders/style-loader)</span>
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// [css-loader](/loaders/css-loader)</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// [sass-loader](/loaders/sass-loader)</span>
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><a href="https://webpack.docschina.org/concepts/loaders/#inline" target="_blank" rel="noopener noreferrer">内联方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：在每个 <code>import</code> 语句中显式指定 loader</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用 ! 前缀，将禁用所有已配置的 normal loader(普通 loader)</span>
<span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'!style-loader!css-loader?modules!./styles.css'</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 !! 前缀，将禁用所有已配置的 loader（preLoader, loader, postLoader）</span>
<span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'!!style-loader!css-loader?modules!./styles.css'</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 -! 前缀，将禁用所有已配置的 preLoader 和 loader，但是不禁用 postLoaders</span>
<span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'-!style-loader!css-loader?modules!./styles.css'</span><span class="token punctuation">;</span>
<span class="token comment">// 想象我们有一个从 cookies 或其他存储中获取语言的方法</span>
<span class="token keyword">const</span> language <span class="token operator">=</span> <span class="token function">detectVisitorLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 异步</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'....'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="常见loader">常见loader</h3> <p><code>raw-loader</code>：加载文件原始内容（utf-8）
<code>file-loader</code>：把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件 (处理图片和字体)
<code>url-loader</code>：与 file-loader 类似，区别是用户可以设置一个阈值，大于阈值会交给 file-loader 处理，小于阈值时返回文件 base64 形式编码 (处理图片和字体)
<code>source-map-loader</code>：加载额外的 Source Map 文件，以方便断点调试
<code>svg-inline-loader</code>：将压缩后的 SVG 内容注入代码中
<code>image-loader</code>：加载并且压缩图片文件
<code>json-loader</code> 加载 JSON 文件（默认包含）
<code>handlebars-loader</code>: 将 Handlebars 模版编译成函数并返回
<code>babel-loader</code>：把 ES6 转换成 ES5
<code>ts-loader</code>: 将 TypeScript 转换成 JavaScript
<code>awesome-typescript-loader</code>：将 TypeScript 转换成 JavaScript，性能优于 ts-loader
<code>sass-loader</code>：将SCSS/SASS代码转换成CSS
<code>css-loader</code>：加载 CSS，支持模块化、压缩、文件导入等特性
<code>style-loader</code>：把 CSS 代码注入到 JavaScript 中，通过 DOM 操作去加载 CSS
<code>postcss-loader</code>：扩展 CSS 语法，使用下一代 CSS，可以配合 autoprefixer 插件自动补齐 CSS3 前缀
<code>eslint-loader</code>：通过 ESLint 检查 JavaScript 代码
<code>tslint-loader</code>：通过 TSLint检查 TypeScript 代码
<code>mocha-loader</code>：加载 Mocha 测试用例的代码
<code>coverjs-loader</code>：计算测试的覆盖率
<code>vue-loader</code>：加载 Vue.js 单文件组件
<code>i18n-loader</code>: 国际化
<code>cache-loader</code>: 可以在一些性能开销较大的 Loader 之前添加，目的是将结果缓存到磁盘里</p> <h2 id="插件（plugin）">插件（plugin）</h2> <p>webpack <strong>插件</strong>基于事件流框架 <code>Tapable</code>，是一个具有 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener noreferrer"><code>apply</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 方法的 JavaScript 对象。<code>apply</code> 方法会被 webpack compiler 调用，并且在 <strong>整个</strong> 编译生命周期都可以访问 compiler 对象。在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</p> <h3 id="用法">用法</h3> <p>在 webpack 配置中，向 <code>plugins</code> 属性传入一个 <code>new</code> 实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js 方式</span>
<span class="token comment">// ProgressPlugin 用于自定义编译过程中的进度报告</span>
<span class="token comment">// HtmlWebpackPlugin 将生成一个 HTML 文件，并在其中使用 script 引入一个名为 my-first-webpack.bundle.js 的 JS 文件。</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问内置的插件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 不带参数</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> template<span class="token punctuation">:</span> <span class="token string">'./src/index.html'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//带参数配置</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Node API 方式</span>
<span class="token comment">// 通过配置中的 plugins 属性传入插件</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问 webpack 运行时(runtime)</span>
<span class="token keyword">const</span> configuration <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="常用plugin">常用plugin</h3> <p><code>define-plugin</code>：定义环境变量 (Webpack4 之后指定 mode 会自动配置)
<code>ignore-plugin</code>：忽略部分文件
<code>html-webpack-plugin</code>：简化 HTML 文件创建 (依赖于 html-loader)
<code>web-webpack-plugin</code>：可方便地为单页应用输出 HTML，比 html-webpack-plugin 好用
<code>uglifyjs-webpack-plugin</code>：不支持 ES6 压缩 (Webpack4 以前)
<code>terser-webpack-plugin</code>: 支持压缩 ES6 (Webpack4)
<code>webpack-parallel-uglify-plugin</code>: 多进程执行代码压缩，提升构建速度
<code>mini-css-extract-plugin</code>: 分离样式文件，CSS 提取为独立文件，支持按需加载 (替代extract-text-webpack-plugin)
<code>serviceworker-webpack-plugin</code>：为网页应用增加离线缓存功能
<code>clean-webpack-plugin</code>: 目录清理
<code>ModuleConcatenationPlugin</code>: 开启 Scope Hoisting
<code>speed-measure-webpack-plugin</code>: 可以看到每个 Loader 和 Plugin 执行耗时 (整个打包耗时、每个 Plugin 和 Loader 耗时)
<code>webpack-bundle-analyzer</code>: 可视化 Webpack 输出文件的体积 (业务组件、依赖第三方模块)</p> <h2 id="loader与plugin区别">loader与plugin区别</h2> <table><thead><tr><th></th> <th>loader</th> <th>plugin</th></tr></thead> <tbody><tr><td>配置</td> <td>在 module.rules 中配置</td> <td>在 plugins 中配置</td></tr> <tr><td>数据类型</td> <td>对象数组。对象有test(类型文件)、loader、options (参数)等属性</td> <td>数组，每一项是一个 Plugin 的实例，参数都通过new(构造函数)传入</td></tr> <tr><td>本质</td> <td>一个函数，在该函数中翻译接收到的内容，返回转换后的结果。对其他类型的资源进行转译的预处理工作。</td> <td>基于事件流框架 <code>Tapable</code>，是一个具有 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener noreferrer"><code>apply</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 方法的 JavaScript 对象。监听Webpack 运行的生命周期中广播事件，并借助API改变结果。</td></tr></tbody></table> <h1 id="配置项">配置项</h1> <p><a href="https://v4.webpack.docschina.org/configuration/#%E9%80%89%E9%A1%B9" target="_blank" rel="noopener noreferrer">配置 (docschina.org)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 	<span class="token comment">// ...</span>
    optimization<span class="token punctuation">:</span><span class="token punctuation">{</span>
        minimize<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 告知 webpack 使用 TerserPlugin 压缩 bundle。production默认true</span>
        <span class="token comment">// 允许你通过提供一个或多个定制过的 TerserPlugin 实例，覆盖默认压缩工具(minimizer)。</span>
        minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            parallel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Must be set to true if using source-maps in production</span>
            terserOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// https://github.com/webpack-contrib/terser-webpack-plugin#terseroptions</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 对于动态导入模块，默认使用 webpack v4+ 提供的全新的通用分块策略(common chunk strategy)</span>
        <span class="token comment">// https://v4.webpack.docschina.org/plugins/split-chunks-plugin/</span>
        splitChunks<span class="token punctuation">:</span><span class="token punctuation">{</span>
            <span class="token comment">//在cacheGroups外层的属性设定适用于所有缓存组，不过每个缓存组内部可以重设这些属性</span>
          chunks<span class="token punctuation">:</span> <span class="token string">&quot;async&quot;</span><span class="token punctuation">,</span> <span class="token comment">//将什么类型的代码块用于分割，三选一： &quot;initial&quot;：入口代码块 | &quot;all&quot;：全部 | &quot;async&quot;：按需加载的代码块</span>
          minSize<span class="token punctuation">:</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token comment">//大小超过30kb的模块才会被提取</span>
          maxSize<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//只是提示，可以被违反，会尽量将chunk分的比maxSize小，当设为0代表能分则分，分不了不会强制</span>
          minChunks<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//某个模块至少被多少代码块引用，才会被提取成新的chunk</span>
          maxAsyncRequests<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">//分割后，按需加载的代码块最多允许的并行请求数，在webpack5里默认值变为6</span>
          maxInitialRequests<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">//分割后，入口代码块最多允许的并行请求数，在webpack5里默认值变为4</span>
          automaticNameDelimiter<span class="token punctuation">:</span> <span class="token string">&quot;~&quot;</span><span class="token punctuation">,</span> <span class="token comment">//代码块命名分割符</span>
          name<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//每个缓存组打包得到的代码块的名称</span>
          cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span> <span class="token comment">//匹配node_modules中的模块</span>
              priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">//优先级，当模块同时命中多个缓存组的规则时，分配到优先级高的缓存组</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
              minChunks<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//覆盖外层的全局属性</span>
              priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
              reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否复用已经从原代码块中分割出来的模块</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="webpack-构建流程">webpack 构建流程</h1> <p>Webpack 的运行流程是一个串行的过程,从启动到结束会依次执行以下流程 :</p> <ol><li>初始化参数：从配置文件和 Shell 语句中读取与合并参数,得出最终的参数。</li> <li>开始编译：用上一步得到的参数初始化 Compiler 对象,加载所有配置的插件,执行对象的 run 方法开始执行编译。</li> <li>确定入口：根据配置中的 entry 找出所有的入口文件。</li> <li>编译模块：从入口文件出发,调用所有配置的 Loader 对模块进行翻译,再找出该模块依赖的模块,再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理。</li> <li>完成模块编译：在经过第 4 步使用 Loader 翻译完所有模块后,得到了每个模块被翻译后的最终内容以及它们之间的依赖关系。</li> <li>输出资源：根据入口和模块之间的依赖关系,组装成一个个包含多个模块的 Chunk,再把每个 Chunk 转换成一个单独的文件加入到输出列表,这步是可以修改输出内容的最后机会。</li> <li>输出完成：在确定好输出内容后,根据配置确定输出的路径和文件名,把文件内容写入到文件系统。</li></ol> <p>在以上过程中,Webpack 会在特定的时间点广播出特定的事件,插件在监听到感兴趣的事件后会执行特定的逻辑,并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</p> <h1 id="webpack问题">webpack问题</h1> <h2 id="提升效率">提升效率</h2> <p><code>webpack-dashboard</code>：可以更友好的展示相关打包信息。</p> <p><code>webpack-merge</code>：提取公共配置，减少重复配置代码</p> <p><code>speed-measure-webpack-plugin</code>：简称 SMP，分析出 Webpack 打包过程中 Loader 和 Plugin 的耗时，有助于找到构建过程中的性能瓶颈。</p> <p><code>size-plugin</code>：监控资源体积变化，尽早发现问题</p> <p><code>HotModuleReplacementPlugin</code>：模块热替换</p> <p><code>webpack-bundle-analyzer</code>:分析包体积</p> <h2 id="优化打包">优化打包</h2> <h3 id="目标">目标</h3> <ul><li>优化用户体验
<ul><li>减少首屏加载时间</li> <li>提升各项交互的流畅度，如表单验证和页面切换</li></ul></li> <li>优化开发体验
<ul><li>减少构建耗时</li> <li>自动化完成一些重复工作，解放生产力，脚手架是代表性产物</li></ul></li></ul> <h3 id="手段">手段</h3> <p>分析：通过speed-measure-webpack-plugin、webpack-bundle-analyzer等插件分析打包时间和打包之后的体积。</p> <h4 id="体积优化">体积优化</h4> <ul><li><p>通过抽离公共代码，splitChunks分包打包等方式减少包体积。</p></li> <li><p>通过css-minimizer-webpack-plugin、terser-webpack-plugin进行css和js代码压缩，减少包体积。</p></li> <li><p>关闭source-map</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  productionSourceMap<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="速度优化">速度优化</h4> <ul><li><p>使用bable-loader指定文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        <span class="token comment">//使用include来指定编译文件夹</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//使用exclude排除指定文件夹</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'babel-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>开启多线程thread-loader</p></li> <li><p>开启缓存HardSourceWebpackPlugin</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        root<span class="token punctuation">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        directories<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        cacheDirectory<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.cache/hard-source/[confighash]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        recordsPath<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.cache/hard-source/[confighash]/records.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        environmentHash<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          root<span class="token punctuation">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          directories<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          files<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'package.json'</span><span class="token punctuation">,</span> <span class="token string">'yarn.lock'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li> <li><p>开发模式开启热更新</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//引入webpack</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//使用webpack提供的热更新插件</span>
   plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
   <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">//最后需要在我们的devserver中配置</span>
     devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    	 hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div></li></ul> <h4 id="体验优化">体验优化</h4> <ul><li><p>compression-webpack-plugin 开启Gzip</p></li> <li><p>cdn配置首屏加速</p></li></ul> <h2 id="热更新">热更新</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/[Optimize]各种优化.html" class="prev">[Optimize]各种优化</a></span> <span class="next"><a href="/notes/[Style]BFC.html">[Style]BFC</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.61f0c8a1.js" defer></script><script src="/assets/js/4.031c4c0e.js" defer></script><script src="/assets/js/47.7663057f.js" defer></script>
  </body>
</html>
