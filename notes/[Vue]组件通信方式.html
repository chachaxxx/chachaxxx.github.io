<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>My Cata</title>
    <meta name="description" content="The description of the site.">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.2264d4e8.css" as="style"><link rel="preload" href="/assets/js/app.61f0c8a1.js" as="script"><link rel="preload" href="/assets/js/4.031c4c0e.js" as="script"><link rel="preload" href="/assets/js/62.ba6d639c.js" as="script"><link rel="prefetch" href="/assets/js/1.2c06699e.js"><link rel="prefetch" href="/assets/js/10.69d76af3.js"><link rel="prefetch" href="/assets/js/11.059a4e31.js"><link rel="prefetch" href="/assets/js/12.c81d7cb5.js"><link rel="prefetch" href="/assets/js/13.444e4ec8.js"><link rel="prefetch" href="/assets/js/14.124d2bed.js"><link rel="prefetch" href="/assets/js/15.febf1378.js"><link rel="prefetch" href="/assets/js/16.446eca84.js"><link rel="prefetch" href="/assets/js/17.4367e345.js"><link rel="prefetch" href="/assets/js/18.9c5bf55a.js"><link rel="prefetch" href="/assets/js/19.73842072.js"><link rel="prefetch" href="/assets/js/20.ff54a6bc.js"><link rel="prefetch" href="/assets/js/21.cd6b4fbb.js"><link rel="prefetch" href="/assets/js/22.e976ee8a.js"><link rel="prefetch" href="/assets/js/23.0a9fb249.js"><link rel="prefetch" href="/assets/js/24.1b21c491.js"><link rel="prefetch" href="/assets/js/25.5b1348de.js"><link rel="prefetch" href="/assets/js/26.298c82d1.js"><link rel="prefetch" href="/assets/js/27.f0f6a4a0.js"><link rel="prefetch" href="/assets/js/28.846b0858.js"><link rel="prefetch" href="/assets/js/29.39bfed1a.js"><link rel="prefetch" href="/assets/js/3.9e8bbfcf.js"><link rel="prefetch" href="/assets/js/30.017396f1.js"><link rel="prefetch" href="/assets/js/31.36f79d24.js"><link rel="prefetch" href="/assets/js/32.3173e347.js"><link rel="prefetch" href="/assets/js/33.fcbffb8a.js"><link rel="prefetch" href="/assets/js/34.b471191f.js"><link rel="prefetch" href="/assets/js/35.a9871011.js"><link rel="prefetch" href="/assets/js/36.f3cad3f2.js"><link rel="prefetch" href="/assets/js/37.340f7814.js"><link rel="prefetch" href="/assets/js/38.16e9a483.js"><link rel="prefetch" href="/assets/js/39.8bb71add.js"><link rel="prefetch" href="/assets/js/40.f60ca09c.js"><link rel="prefetch" href="/assets/js/41.6c5d4837.js"><link rel="prefetch" href="/assets/js/42.7cb165b2.js"><link rel="prefetch" href="/assets/js/43.016f7d1f.js"><link rel="prefetch" href="/assets/js/44.50cc140b.js"><link rel="prefetch" href="/assets/js/45.cec45a65.js"><link rel="prefetch" href="/assets/js/46.44c8ce2f.js"><link rel="prefetch" href="/assets/js/47.7663057f.js"><link rel="prefetch" href="/assets/js/48.b63e4edc.js"><link rel="prefetch" href="/assets/js/49.1c04ecb0.js"><link rel="prefetch" href="/assets/js/5.e5b013c3.js"><link rel="prefetch" href="/assets/js/50.203149d1.js"><link rel="prefetch" href="/assets/js/51.e8d2808e.js"><link rel="prefetch" href="/assets/js/52.4bff45a3.js"><link rel="prefetch" href="/assets/js/53.d3bfe4fc.js"><link rel="prefetch" href="/assets/js/54.ece4d1bd.js"><link rel="prefetch" href="/assets/js/55.7bfc0aea.js"><link rel="prefetch" href="/assets/js/56.abfbcb0a.js"><link rel="prefetch" href="/assets/js/57.322cc0c7.js"><link rel="prefetch" href="/assets/js/58.8069b906.js"><link rel="prefetch" href="/assets/js/59.4af20640.js"><link rel="prefetch" href="/assets/js/6.ee007060.js"><link rel="prefetch" href="/assets/js/60.2bc64cd9.js"><link rel="prefetch" href="/assets/js/61.a8a49e1b.js"><link rel="prefetch" href="/assets/js/63.85b52299.js"><link rel="prefetch" href="/assets/js/64.ae97ef4b.js"><link rel="prefetch" href="/assets/js/65.a9ec3ec1.js"><link rel="prefetch" href="/assets/js/7.445bd0ee.js"><link rel="prefetch" href="/assets/js/8.8f7c8e84.js"><link rel="prefetch" href="/assets/js/9.7e7cc3fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2264d4e8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">My Cata</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">作品集</a></div><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">笔记</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">作品集</a></div><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">笔记</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/" class="sidebar-link">/notes/</a></li><li><a href="/notes/[Base]MVVM &amp;  MVC.html" class="sidebar-link">[Base]MVVM &amp;  MVC</a></li><li><a href="/notes/[Base]八股文.html" class="sidebar-link">[Base]八股文</a></li><li><a href="/notes/[Base]前端安全问题.html" class="sidebar-link">[Base]前端安全问题</a></li><li><a href="/notes/[Base]语言中所有的底层存储方式.html" class="sidebar-link">[Base]语言中所有的底层存储方式</a></li><li><a href="/notes/[Base]跨域以及解决方案.html" class="sidebar-link">[Base]跨域以及解决方案</a></li><li><a href="/notes/[Base]身份认证.html" class="sidebar-link">[Base]身份认证</a></li><li><a href="/notes/[Electtron]学习笔记.html" class="sidebar-link">[Electtron]学习笔记</a></li><li><a href="/notes/[HTML]HTML5.html" class="sidebar-link">[HTML]HTML5</a></li><li><a href="/notes/[HTML]语义化.html" class="sidebar-link">[HTML]语义化</a></li><li><a href="/notes/[JavaScript]ES6新特性.html" class="sidebar-link">[JavaScript]ES6新特性</a></li><li><a href="/notes/[JavaScript]EventLoop、宏任务和微任务.html" class="sidebar-link">[JavaScript]EventLoop、宏任务和微任务</a></li><li><a href="/notes/[JavaScript]Symbol.html" class="sidebar-link">[JavaScript]Symbol</a></li><li><a href="/notes/[JavaScript]this &amp; bind,apply,call 装饰器.html" class="sidebar-link">[JavaScript]this &amp; bind,apply,call 装饰器</a></li><li><a href="/notes/[JavaScript]事件流、事件委托、事件冒泡.html" class="sidebar-link">[JavaScript]事件流、事件委托、事件冒泡</a></li><li><a href="/notes/[JavaScript]作用域、闭包、变量、变量提升.html" class="sidebar-link">[JavaScript]作用域、闭包、变量、变量提升</a></li><li><a href="/notes/[JavaScript]原型、原型链、继承.html" class="sidebar-link">[JavaScript]原型、原型链、继承</a></li><li><a href="/notes/[JavaScript]常见数据处理积累.html" class="sidebar-link">[JavaScript]常见数据处理积累</a></li><li><a href="/notes/[JavaScript]异步.html" class="sidebar-link">[JavaScript]异步</a></li><li><a href="/notes/[JavaScript]正则表达式.html" class="sidebar-link">[JavaScript]正则表达式</a></li><li><a href="/notes/[JavaScript]深浅拷贝.html" class="sidebar-link">[JavaScript]深浅拷贝</a></li><li><a href="/notes/[Layout]响应式布局.html" class="sidebar-link">[Layout]响应式布局</a></li><li><a href="/notes/[Layout]界面兼容性.html" class="sidebar-link">[Layout]界面兼容性</a></li><li><a href="/notes/[Optimize]各种优化.html" class="sidebar-link">[Optimize]各种优化</a></li><li><a href="/notes/[Publish]webpack.html" class="sidebar-link">[Publish]webpack</a></li><li><a href="/notes/[Style]BFC.html" class="sidebar-link">[Style]BFC</a></li><li><a href="/notes/[Style]CSS3新特性.html" class="sidebar-link">[Style]CSS3新特性</a></li><li><a href="/notes/[Style]CSS预编译器对比.html" class="sidebar-link">[Style]CSS预编译器对比</a></li><li><a href="/notes/[Style]less.html" class="sidebar-link">[Style]less</a></li><li><a href="/notes/[Style]sass &amp; scss.html" class="sidebar-link">[Style]sass &amp; scss</a></li><li><a href="/notes/[Style]居中样式.html" class="sidebar-link">[Style]居中样式</a></li><li><a href="/notes/[Style]常见图形.html" class="sidebar-link">[Style]常见图形</a></li><li><a href="/notes/[Style]盒子模型与flex布局、栅格布局.html" class="sidebar-link">[Style]盒子模型与flex布局、栅格布局</a></li><li><a href="/notes/[TypeScript]学习笔记.html" class="sidebar-link">[TypeScript]学习笔记</a></li><li><a href="/notes/[UniAPP]与H5开发不同.html" class="sidebar-link">[UniAPP]与H5开发不同</a></li><li><a href="/notes/[Vue]Vue-router.html" class="sidebar-link">[Vue]Vue-router</a></li><li><a href="/notes/[Vue]Vuex.html" class="sidebar-link">[Vue]Vuex</a></li><li><a href="/notes/[Vue]小知识点.html" class="sidebar-link">[Vue]小知识点</a></li><li><a href="/notes/[Vue]指令.html" class="sidebar-link">[Vue]指令</a></li><li><a href="/notes/[Vue]生命周期.html" class="sidebar-link">[Vue]生命周期</a></li><li><a href="/notes/[Vue]组件通信方式.html" class="active sidebar-link">[Vue]组件通信方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#_1-props-v-bind-v-model-和-emit-v-on-（父子通信）" class="sidebar-link">1.props / v-bind(:) / v-model 和 $emit / v-on(@)（父子通信）</a></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#_2-refs（父调用子）" class="sidebar-link">2.refs（父调用子）</a></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#_3-children-parent（父子通信）" class="sidebar-link">3.$children / $parent（父子通信）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#parent" class="sidebar-link">parent</a></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#vm-children" class="sidebar-link">vm.$children</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#_4-listeners（隔代通信）" class="sidebar-link">4.$attrs和$listeners（隔代通信）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#vm-attrs" class="sidebar-link">vm.$attrs</a></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#vm-listeners" class="sidebar-link">vm.$listeners</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#_5-中央事件总线eventbus（局部、全局通信）" class="sidebar-link">5.中央事件总线EventBus（局部、全局通信）</a></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#_6-provide-inject-祖先向子" class="sidebar-link">6.provide/ inject (祖先向子)</a></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#_7-vuex（全局通信）" class="sidebar-link">7.Vuex（全局通信）</a></li><li class="sidebar-sub-header"><a href="/notes/[Vue]组件通信方式.html#_8-localstorage-sessionstorage" class="sidebar-link">8.localStorage / sessionStorage</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>|-----------------------------|
|             组件A             |
|        |---------------------|
|		|	组件B            |
|		|		|-------------|
|		|		|    组件C  |
|		|		|-------------|
|		|		|    组件D |
|		|		|-------------|
|		|---------------------|
|-----------------------------|</p> <h1 id="vue2组件通信方式">vue2组件通信方式</h1> <p>只能用于父子组件通信：</p> <ul><li>props / v-bind（:）/  v-model</li> <li>$emit / v-on（@）</li> <li>$attrs / $listeners</li> <li>ref</li> <li>$children / $parent</li></ul> <p>只能用于兄弟组件通信：</p> <ul><li>$parent</li></ul> <p>跨层级组件通信：</p> <ul><li>provide/inject</li> <li>EventBus</li> <li>Vuex</li> <li>$attrs / $listeners</li> <li>$root</li> <li>localStorage / sessionStorage</li></ul> <h2 id="_1-props-v-bind-v-model-和-emit-v-on-（父子通信）">1.props / v-bind(😃 / v-model 和 $emit / v-on(@)（父子通信）</h2> <p>父组件向子组件传递数据是通过prop传递的，子组件传递数据给父组件是通过$emit触发事件来做到的。</p> <p>1.父组件传递了数据给子组件props，并且通过v-on绑定了一个事件来监听子组件的触发事件；
2.子组件通过props(不可在子组件修改)得到相关的数据,最后通过this.$emit触发了相应事件;
3.某prop.sync帮我们实现父组件向子组件传递的数据 的双向绑定，所以子组件接收到数据后<strong>可以直接修改</strong>，并且会同时修改父组件的数据.</p> <p><a href="/notes/[Vue]指令.html">[vue]指令</a></p> <p><strong>v-bind到底干了什么 &amp;&amp; $emit到底干了什么</strong></p> <p><a href="https://juejin.cn/post/6844904062417109005" target="_blank" rel="noopener noreferrer">vue源码解析事件派发（on、emit、once、off） - 掘金 (juejin.cn)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_2-refs（父调用子）">2.refs（父调用子）</h2> <p><code>ref</code> 被用来给元素或子组件注册引用信息。引用信息将会注册在父组件的 <code>$refs</code> 对象上。如果在<strong>普通的 DOM 元素上使用，引用指向的就是 DOM 元素</strong>；如果用在<strong>子组件上，引用就指向组件实例</strong>.</p> <p>在v-for指令下的组件或者元素，引用信息将是包含 DOM 节点或组件实例的<strong>数组</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>p<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

this.$refs.p.innerHtml
</code></pre></div><h2 id="_3-children-parent（父子通信）">3.$children / $parent（父子通信）</h2> <blockquote><h3 id="parent"><a href="https://cn.vuejs.org/v2/api/#parent" target="_blank" rel="noopener noreferrer">parent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <ul><li><p><strong>类型</strong>：<code>Vue instance</code></p></li> <li><p><strong>详细</strong>：</p> <p>指定已创建的实例之父实例，在两者之间建立父子关系。子实例可以用 <code>this.$parent</code> 访问父实例，子实例被推入父实例的 <code>$children</code> 数组中。</p> <p>节制地使用 <code>$parent</code> 和 <code>$children</code> - 它们的主要目的是作为访问组件的应急方法。更推荐用 props 和 events 实现父子组件通信</p></li></ul></blockquote> <blockquote><h3 id="vm-children"><a href="https://cn.vuejs.org/v2/api/#vm-children" target="_blank" rel="noopener noreferrer">vm.$children<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <ul><li><p><strong>类型</strong>：<code>Array&lt;Vue instance&gt;</code></p></li> <li><p><strong>只读</strong></p></li> <li><p><strong>详细</strong>：</p> <p>当前实例的直接子组件。**需要注意 <code>$children</code> 并不保证顺序，也不是响应式的。**如果你发现自己正在尝试使用 <code>$children</code> 来进行数据绑定，考虑使用一个数组配合 <code>v-for</code> 来生成子组件，并且使用 Array 作为真正的来源。</p></li></ul></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>msg
<span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>callMsg
</code></pre></div><p>注意：</p> <p>​	**边界情况：**在<code>#app</code>上拿<code>$parent</code>得到的是<code>new Vue()</code>的实例，在这实例上再拿<code>$parent</code>得到的是<code>undefined</code>，而在最底层的子组件拿<code>$children</code>是个空数组。也要注意得到<code>$parent</code>和<code>$children</code>的值不一样，<code>$children</code> 的值是数组，而<code>$parent</code>是个对象。</p> <p>​	**使用：**节制地使用 <code>$parent</code> 和 <code>$children</code> - 它们的主要目的是作为访问组件的应急方法。更推荐用 props 和 events 实现父子组件通信</p> <h2 id="_4-listeners（隔代通信）">4.attrs和listeners（隔代通信）</h2> <p>Vue 2.4开始提供了attrs和listeners来解决A,C通信问题。</p> <blockquote><h3 id="vm-attrs"><a href="https://cn.vuejs.org/v2/api/#vm-attrs" target="_blank" rel="noopener noreferrer">vm.$attrs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <blockquote><p>2.4.0 新增</p></blockquote> <ul><li><p><strong>类型</strong>：<code>{ [key: string]: string }</code></p></li> <li><p><strong>只读</strong></p></li> <li><p><strong>详细</strong>：</p> <p>包含了父作用域中不作为 prop 被识别 (且获取) 的 attribute 绑定 (<code>class</code> 和 <code>style</code> 除外)。当一个组件没有声明任何 prop 时，这里会包含所有父作用域的绑定 (<code>class</code> 和 <code>style</code> 除外)，并且可以通过 <code>v-bind=&quot;$attrs&quot;</code> 传入内部组件——在创建高级别的组件时非常有用。</p></li></ul></blockquote> <p>一般情况下：父组件通过v-bind绑定一个数据传递给子组件，子组件通过props接收到就可以在子组件的html中使用了。但是，如果父组件v-bind传递给子组件，子组件没有用props接收呢？这个时候，父组件传递过来的数据就会被挂载(赋值)到这个子组件自带的对象attrs上面，所以:attrs就是一个容器对象，这个容器对象会存放:父组件传过来的且子组件未使用props声明接收的数据。</p> <p>**爷组件传递给孙组件的逻辑流程 **: 通过爷组件首先传递给父组件，当然父组件不在props中接收，那么爷组件传递给父组件的数据就会存放到父组件的<code>$attrs</code>对象中里面了，然后，再通过<code>v-bind=&quot;$attrs&quot;</code>，再把这个<code>$attr</code>传递给孙组件，在孙组件中使用props就能接收到<code>$attrs</code>中的数据了，这样就实现了，祖孙之间的数据传递。</p> <blockquote><h3 id="vm-listeners"><a href="https://cn.vuejs.org/v2/api/#vm-listeners" target="_blank" rel="noopener noreferrer">vm.$listeners<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <blockquote><p>2.4.0 新增</p></blockquote> <ul><li><p><strong>类型</strong>：<code>{ [key: string]: Function | Array&lt;Function&gt; }</code></p></li> <li><p><strong>只读</strong></p></li> <li><p><strong>详细</strong>：</p> <p>包含了父作用域中的 (不含 <code>.native</code> 修饰器的) <code>v-on</code> 事件监听器。它可以通过 <code>v-on=&quot;$listeners&quot;</code> 传入内部组件——在创建更高层次的组件时非常有用。</p></li></ul></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// B父组件，桥梁作用
&lt;c v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt;&lt;/c&gt;

// C孙组件，发送事件
this.$emit(&quot;formC&quot;)

// A爷组件，接收
&lt;b @formC=&quot;formC&quot;&gt;

</code></pre></div><h2 id="_5-中央事件总线eventbus（局部、全局通信）">5.中央事件总线EventBus（局部、全局通信）</h2> <blockquote><p><code>EventBus</code> 又称为事件总线。在Vue中可以使用 <code>EventBus</code> 来作为沟通桥梁的概念，就像是所有组件共用相同的事件中心，可以向该中心注册发送事件或接收事件，所以组件都可以上下平行地通知其他组件，但也就是太方便所以若使用不慎，就会造成难以维护的灾难</p></blockquote> <p><strong>新建一个Vue事件bus对象，然后通过bus.emit触发事件，bus.on监听触发的事件。</strong></p> <p>初始化</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// event-bus.js</span>

<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> EventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// main.js 引入全局的事件总线</span>

<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$EventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 使用this.$EventBus.$emit()</span>
</code></pre></div><p>通信</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 某组件中 引入局部事件总线或者全局事件总线</span>
<span class="token comment">// 发送消息</span>
 EventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 某组件 引入局部事件总线或者全局事件总线</span>
<span class="token comment">// 接收消息</span>
 <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            EventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
               <span class="token operator">...</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 只监听一次 EventBus.$once(channel: string, callback(payload1,…))</span>
            <span class="token comment">// 移除 EventBus.$off(channel: string)</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>缺点</p> <ul><li><p>可读性比较差。</p></li> <li><p>组件间只能通过消息通信，无法共享相关数据。</p></li></ul> <h2 id="_6-provide-inject-祖先向子">6.provide/ inject (祖先向子)</h2> <p>父组件中通过<code>provide</code>来提供变量, 然后再子孙组件中通过<code>inject</code>来注入变量</p> <ul><li><p><strong>类型</strong>：</p> <ul><li><p><strong>provide</strong>：<code>Object | () =&gt; Object</code></p> <ul><li><code>provide</code> 选项应该是一个对象或返回一个对象的函数。</li></ul></li> <li><p><strong>inject</strong>：<code>Array&lt;string&gt; | { [key: string]: string | Symbol | Object }</code></p> <p><code>inject</code> 选项应该是：</p> <ul><li>一个字符串数组</li> <li>一个对象，对象的 key 是本地的绑定名，value 是：
<ul><li>在可用的注入内容中搜索用的 key (字符串或 Symbol)，或</li> <li>一个对象，该对象的：
<ul><li><code>from</code> property 是在可用的注入内容中搜索用的 key (字符串或 Symbol)</li> <li><code>default</code> property 是降级情况下使用的 value</li></ul></li></ul></li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 父级组件提供 'foo'</span>
<span class="token keyword">var</span> Provider <span class="token operator">=</span> <span class="token punctuation">{</span>
  provide<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">:</span> <span class="token string">'bar'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 子组件注入 'foo'</span>
<span class="token keyword">var</span> Child <span class="token operator">=</span> <span class="token punctuation">{</span>
  inject<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;bar&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_7-vuex（全局通信）">7.Vuex（全局通信）</h2> <p>重点，详看</p> <p><a href="./%5BVue%5DVuex">vuex</a></p> <h2 id="_8-localstorage-sessionstorage">8.localStorage / sessionStorage</h2> <p>仅在客户端（即浏览器）中保存，<strong>不参与和服务器的通信的本地存储</strong>。</p> <p>这种通信比较简单,缺点是数据和状态比较混乱,不太容易维护。 通过<code>window.localStorage.getItem(key)</code>获取数据 通过<code>window.localStorage.setItem(key,value)</code>存储数据</p> <blockquote><p>注意用<code>JSON.parse()</code> / <code>JSON.stringify()</code> 做数据格式转换 <code>localStorage</code> / <code>sessionStorage</code>可以结合<code>vuex</code>, 实现数据的持久保存,同时使用vuex解决数据和状态混乱问题.</p></blockquote> <p><strong>区别</strong></p> <ul><li><p>localStorage：除非被手动清除，否则将会永久保存。会话之间共享，可跨页面。</p></li> <li><p>sessionStorage： 仅在当前网页会话下有效，关闭页面或浏览器后就会被清除。会话之间不共享。</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/[Vue]生命周期.html" class="prev">[Vue]生命周期</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.61f0c8a1.js" defer></script><script src="/assets/js/4.031c4c0e.js" defer></script><script src="/assets/js/62.ba6d639c.js" defer></script>
  </body>
</html>
